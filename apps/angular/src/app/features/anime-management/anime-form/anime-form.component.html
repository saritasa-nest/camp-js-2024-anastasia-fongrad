<form [formGroup]="animeDetailsForm" class="main__form">
	<div class="form__left">
		<mat-form-field appearance="fill">
			<mat-label>Trailer Url</mat-label>
			<input matInput formControlName="trailerUrl">
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>English Title</mat-label>
			<input matInput formControlName="titleEnglish">
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>Japanese Title</mat-label>
			<input matInput formControlName="titleJapanese">
		</mat-form-field>

		<mat-form-field>
			<mat-label>Anime Synopsis</mat-label>
			<textarea class="form__synopsis" formControlName="synopsis" matInput></textarea>
		</mat-form-field>
	</div>
	<mat-divider class="form__divider"/>
	<div class="form__right">
		<mat-form-field appearance="fill">
			<mat-label>Anime Type</mat-label>
			<mat-select formControlName="type">
				@for (option of selectTypes; track option) {
					<mat-option [value]="option">{{ option }}</mat-option>
				}
			</mat-select>
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>Anime Status</mat-label>
			<mat-select formControlName="status">
				@for (option of selectStatuses; track option) {
					<mat-option [value]="option">{{ option }}</mat-option>
				}
			</mat-select>
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>Anime Rating</mat-label>
			<mat-select formControlName="type">
				@for (option of selectRatings; track option) {
					<mat-option [value]="option">{{ option }}</mat-option>
				}
			</mat-select>
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>Anime Season</mat-label>
			<mat-select formControlName="season">
				@for (option of selectSeasons; track option) {
					<mat-option [value]="option">{{ option }}</mat-option>
				}
			</mat-select>
		</mat-form-field>

		<mat-form-field appearance="fill">
			<mat-label>Anime Source</mat-label>
			<mat-select formControlName="source">
				@for (option of selectSources; track option) {
					<mat-option [value]="option">{{ option }}</mat-option>
				}
			</mat-select>
		</mat-form-field>
	</div>
	<mat-divider class="form__divider"/>
	<div class="form__airing airing">
		<div class="airing__toggle">
			<mat-button-toggle-group
				class="main__toggle"
				name="fontStyle"
				aria-label="Font Style"
				formControlName="airingStatus"
			>
				<mat-button-toggle [value]="true">Airing</mat-button-toggle>
				<mat-button-toggle [value]="false">Not airing</mat-button-toggle>
			</mat-button-toggle-group>
		</div>

		<mat-form-field>
			<mat-label>Start Airing Date</mat-label>
			<input matInput
				[matDatepicker]="startPicker"
				formControlName="airingStartDate"
			>
			<mat-hint>MM/DD/YYYY</mat-hint>
			<mat-datepicker-toggle matIconSuffix [for]="startPicker"/>
			<mat-datepicker #startPicker></mat-datepicker>
		</mat-form-field>

		<mat-form-field>
			<mat-label>End Airing Date</mat-label>
			<input matInput
				[matDatepicker]="endPicker"
				formControlName="airingEndDate"
			>
			<mat-hint>MM/DD/YYYY</mat-hint>
			<mat-datepicker-toggle matIconSuffix [for]="endPicker"/>
			<mat-datepicker #endPicker></mat-datepicker>
		</mat-form-field>
	</div>
	<mat-divider class="form__divider"/>
	<div class="form__multi-filters">
		<div class="form__genres">
			<mat-form-field class="form__chip-list">
				<mat-label>Anime Genres</mat-label>
				<mat-chip-grid #chipGrid aria-label="Genre selection">
					@for (genre of selectedGenres; track $index) {
						<mat-chip-row (removed)="removeGenre(genre)">
							{{genre.name}}
							<button type="button" matChipRemove [attr.aria-label]="'remove ' + genre.name">
								<mat-icon>cancel</mat-icon>
							</button>
						</mat-chip-row>
					}
				</mat-chip-grid>
				<input
					name="currentGenre"
					placeholder="New Genre..."
					#genreInput
					[matChipInputFor]="chipGrid"
					[matAutocomplete]="auto"
					[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
					(matChipInputTokenEnd)="addGenre($event)"
				/>
				<mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedGenre($event)">
					@for (genre of filteredGenres$ | async; track $index) {
						<mat-option [value]="genre.name">
							{{genre.name}}
						</mat-option>
					}
				</mat-autocomplete>
			</mat-form-field>
			<a mat-fab extended
				class='anime-details__add-genre'
			>
				<mat-icon>add</mat-icon>
				Add Genre
			</a>
		</div>
		<div class="form__studios">
			<mat-form-field class="form__chip-list">
				<mat-label>Anime Studios</mat-label>
				<mat-chip-grid #chipGridNew aria-label="Studio selection">
					@for (studio of selectedStudios; track $index) {
						<mat-chip-row (removed)="removeStudio(studio)">
							@if (studio.imageUrl) {
								<img matChipAvatar [src]="studio.imageUrl" alt="{{studio.name}}">
							}
							{{studio.name}}
							<button type="button" matChipRemove [attr.aria-label]="'remove ' + studio.name">
								<mat-icon>cancel</mat-icon>
							</button>
						</mat-chip-row>
					}
				</mat-chip-grid>
				<input
					name="currentStudio"
					placeholder="New Studio..."
					#studioInput
					[matChipInputFor]="chipGridNew"
					[matAutocomplete]="autoNew"
					[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
					(matChipInputTokenEnd)="addStudio($event)"
				/>
				<mat-autocomplete #autoNew="matAutocomplete" (optionSelected)="selectedStudio($event)">
					@for (studio of filteredStudios$ | async; track $index) {
						<mat-option [value]="studio.name">
							@if (studio.imageUrl) {
								<img [src]="studio.imageUrl" [alt]="studio.name" width="24" height="24">
							}
							{{studio.name}}
						</mat-option>
					}
				</mat-autocomplete>
			</mat-form-field>
			<a mat-fab extended
				class='anime-details__add-studio'
			>
				<mat-icon>add</mat-icon>
				Add Studio
			</a>
		</div>
	</div>
	<button class="form__submit" mat-raised-button type="submit">Add Anime</button>
</form>
