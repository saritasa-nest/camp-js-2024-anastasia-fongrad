<camp-header/>
<main class="main">
	<section class="main__table">
		<div class="main__container container">
			<h1 class="main__header">
				Anime Catalog
			</h1>
			<form [formGroup]="animeForm" class="main__form">
				<mat-form-field class="main__type-select" appearance="fill">
					<mat-label>Anime type</mat-label>
					<mat-select formControlName="animeType" multiple>
						@for (option of selectTypes; track option) {
							<mat-option [value]="option">{{ option }}</mat-option>
						}
					</mat-select>
				</mat-form-field>
				<div class="main__search-group">
					<mat-form-field appearance="fill">
						<mat-label>Search</mat-label>
						<input matInput formControlName="searchQuery" placeholder="Placeholder">
					</mat-form-field>
					<button class="main__search-button" mat-flat-button type="submit">Search</button>
				</div>
				@if(animeParameters.animeOrdering.length > 0){
					<button class="main__reset-button" mat-flat-button type="button" (click)="stopSorting()">Cancel sorting</button>
				}
			</form>
			<camp-anime-table [animeList]="(paginatedAnime$ | async)?.results" (sortChange)="routeParameterService.onSortChange($event)" [cancelSorting$]="cancelSorting.asObservable()"/>
			<mat-paginator #paginator [length]="(paginatedAnime$ | async)?.totalCount" [pageSize]="animeParameters.limitPerPage" [pageIndex]="animeParameters.offset / animeParameters.limitPerPage" [pageSizeOptions]="pageSizeOptions" (page)="routeParameterService.onPageChange($event)" aria-label="Select page">
			</mat-paginator>
		</div>
	</section>
</main>
