"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[220],{2220:(L,c,n)=>{n.r(c),n.d(c,{LoginComponent:()=>j});var m,t=n(7788),d=n(1606),u=n(8698),l=n(922),s=n(7222),a=n(2073),g=n(4587),h=n(2221),p=n(4232),v=n(8556),F=n(9090),S=n(7236),E=n(7212),f=n(6610);(m||(m={})).initialize=function C(e){return e.group({email:e.control("",[s.k0.required,s.k0.email]),password:e.control("",[s.k0.required])})};let b=(()=>{class i{constructor(){this.loginSuccess=new t.bkB,this.formBuilder=(0,t.WQX)(s.Qk),this.authService=(0,t.WQX)(p.L),this.formValidationService=(0,t.WQX)(v.$),this.loginErrorsSubject$=new F.m(1),this.destroyRef=(0,t.WQX)(t.abz),this.loginForm=m.initialize(this.formBuilder),this.loginErrors$=this.loginErrorsSubject$.asObservable()}ngOnInit(){this.initializeFormValues()}initializeFormValues(){Object.keys(this.loginForm.controls).forEach(e=>{const o=this.loginForm.get(e);o?.valueChanges.pipe((0,E.pQ)(this.destroyRef)).subscribe(()=>{o.setErrors(null)})})}getFieldError(e,o){return this.formValidationService.getErrorMessage(this.loginForm,o,e)}onSubmit(){if(!this.loginForm?.valid)return;const e=this.loginForm.getRawValue();this.authService.login(e).pipe((0,S.M)(o=>{o?this.formValidationService.setFormErrors(this.loginForm,o):this.loginSuccess.emit(),this.loginErrorsSubject$.next(o)})).subscribe()}static#t=this.\u0275fac=function(o){return new(o||i)};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["camp-login-form"]],outputs:{loginSuccess:"loginSuccess"},standalone:!0,features:[t.aNF],decls:20,vars:11,consts:[[1,"login__form",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","id","email","type","email","formControlName","email"],["matInput","","id","password","type","password","formControlName","password"],[1,"login__form-error"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(o,r){1&o&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(1,"mat-form-field",1)(2,"mat-label"),t.EFF(3,"Email"),t.k0s(),t.nrm(4,"input",2),t.j41(5,"mat-error"),t.EFF(6),t.nI1(7,"async"),t.k0s()(),t.j41(8,"mat-form-field",1)(9,"mat-label"),t.EFF(10,"Password"),t.k0s(),t.nrm(11,"input",3),t.j41(12,"mat-error"),t.EFF(13),t.nI1(14,"async"),t.k0s()(),t.j41(15,"div",4),t.EFF(16),t.nI1(17,"async"),t.k0s(),t.j41(18,"button",5),t.EFF(19,"Login"),t.k0s()()),2&o&&(t.Y8G("formGroup",r.loginForm),t.R7$(6),t.JRh(r.getFieldError(t.bMT(7,5,r.loginErrors$),"email")),t.R7$(7),t.JRh(r.getFieldError(t.bMT(14,7,r.loginErrors$),"password")),t.R7$(3),t.JRh(r.getFieldError(t.bMT(17,9,r.loginErrors$),"form")),t.R7$(2),t.Y8G("disabled",!r.loginForm.valid))},dependencies:[s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,h.Hl,h.$z,a.RG,a.rl,a.nJ,a.TL,g.fS,g.fg,f.MD,f.Jj],styles:[".login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2);max-width:700px}.login__form-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:var(--body-small);line-height:var(--body-small-line-height)}"],changeDetection:0})}return i})();const y=i=>[i];let j=(()=>{class i{constructor(){this.appRoutes=u.S,this.router=(0,t.WQX)(l.Ix)}onLoginSuccess(){this.router.navigate([u.S.Home])}static#t=this.\u0275fac=function(o){return new(o||i)};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["camp-login"]],standalone:!0,features:[t.aNF],decls:13,vars:3,consts:[[1,"main"],[1,"main__auth","auth"],[1,"auth__container","container"],[1,"auth__content"],[1,"auth__login-group"],[1,"auth__header"],[3,"loginSuccess"],[1,"auth__switch"],[3,"routerLink"]],template:function(o,r){1&o&&(t.nrm(0,"camp-header"),t.j41(1,"main",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),t.EFF(7,"Login"),t.k0s(),t.j41(8,"camp-login-form",6),t.bIt("loginSuccess",function(){return r.onLoginSuccess()}),t.k0s(),t.j41(9,"div",7),t.EFF(10," Don't have an account? "),t.j41(11,"a",8),t.EFF(12,"Register"),t.k0s()()()()()()()),2&o&&(t.R7$(11),t.Y8G("routerLink",t.eq3(1,y,"/"+r.appRoutes.Registration)))},dependencies:[d.l,b,l.iI,l.Wk],styles:[".auth__content[_ngcontent-%COMP%]{margin:var(--space-20) 0}.auth__header[_ngcontent-%COMP%]{font-size:var(--title);line-height:var(--title-line-height);font-weight:var(--text-semibold)}.auth__login-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-8)}"],changeDetection:0})}return i})()}}]);