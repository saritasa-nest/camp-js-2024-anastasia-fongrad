"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[220],{2220:(z,c,t)=>{t.r(c),t.d(c,{LoginComponent:()=>L});var m,o=t(7788),f=t(2088),g=t(8698),l=t(922),r=t(8832),s=t(2130),u=t(4587),h=t(2221),d=t(7443),p=t(7617),v=t(3527),F=t(4526),S=t(7236),R=t(7212),C=t(6610);(m||(m={})).initialize=function j(a){return a.group({email:a.control("",[r.k0.required,r.k0.email]),password:a.control("",[r.k0.required])})};let E=(()=>{class i{constructor(){this.loginSuccess=new o.bkB,this.formValidationService=(0,o.WQX)(p.$),this.formBuilder=(0,o.WQX)(r.Qk),this.authService=(0,o.WQX)(d.L),this.destroyRef=(0,o.WQX)(o.abz),this.changeDetectorRef=(0,o.WQX)(o.gRc),this.loginForm=m.initialize(this.formBuilder)}ngOnInit(){this.initializeErrorsReset()}initializeErrorsReset(){Object.keys(this.loginForm.controls).forEach(a=>{const n=this.loginForm.get(a);n?.valueChanges.pipe((0,R.pQ)(this.destroyRef)).subscribe(()=>{n.setErrors(null)})})}onSubmit(){if(!this.loginForm?.valid)return;const a=this.loginForm.getRawValue();this.authService.login(a).pipe((0,v.T)(()=>{}),(0,F.W)(n=>this.formValidationService.parseError(n)),(0,S.M)(n=>{n?(this.formValidationService.setFormErrors(this.loginForm,n),this.changeDetectorRef.markForCheck()):this.loginSuccess.emit()})).subscribe()}static#o=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=o.VBU({type:i,selectors:[["camp-login-form"]],outputs:{loginSuccess:"loginSuccess"},standalone:!0,features:[o.aNF],decls:18,vars:5,consts:[[1,"login"],[1,"login__form",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","id","email","type","email","formControlName","email"],["matInput","","id","password","type","password","formControlName","password"],[1,"login__form-error"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,e){1&n&&(o.j41(0,"div",0)(1,"form",1),o.bIt("ngSubmit",function(){return e.onSubmit()}),o.j41(2,"mat-form-field",2)(3,"mat-label"),o.EFF(4,"Email"),o.k0s(),o.nrm(5,"input",3),o.j41(6,"mat-error"),o.EFF(7),o.k0s()(),o.j41(8,"mat-form-field",2)(9,"mat-label"),o.EFF(10,"Password"),o.k0s(),o.nrm(11,"input",4),o.j41(12,"mat-error"),o.EFF(13),o.k0s()(),o.j41(14,"div",5),o.EFF(15),o.k0s(),o.j41(16,"button",6),o.EFF(17,"Login"),o.k0s()()()),2&n&&(o.R7$(),o.Y8G("formGroup",e.loginForm),o.R7$(6),o.JRh(e.formValidationService.getControlErrorMessage(e.loginForm.controls.email)),o.R7$(6),o.JRh(e.formValidationService.getControlErrorMessage(e.loginForm.controls.password)),o.R7$(2),o.JRh(e.formValidationService.getFormErrorMessage(e.loginForm)),o.R7$(),o.Y8G("disabled",!e.loginForm.valid))},dependencies:[r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,h.Hl,h.$z,s.RG,s.rl,s.nJ,s.TL,u.fS,u.fg,C.MD],styles:[".login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2);max-width:700px}.login__form-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:var(--body-small);line-height:var(--body-small-line-height)}"],changeDetection:0})}return i})();const y=i=>[i];let L=(()=>{class i{constructor(){this.appRoutes=g.S,this.router=(0,o.WQX)(l.Ix)}onLoginSuccess(){this.router.navigate([g.S.Home])}static#o=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=o.VBU({type:i,selectors:[["camp-login"]],standalone:!0,features:[o.aNF],decls:13,vars:3,consts:[[1,"main"],[1,"main__auth","auth"],[1,"auth__container","container"],[1,"auth__content"],[1,"auth__login-group"],[1,"auth__header"],[3,"loginSuccess"],[1,"auth__switch"],[3,"routerLink"]],template:function(n,e){1&n&&(o.nrm(0,"camp-header"),o.j41(1,"main",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),o.EFF(7,"Login"),o.k0s(),o.j41(8,"camp-login-form",6),o.bIt("loginSuccess",function(){return e.onLoginSuccess()}),o.k0s(),o.j41(9,"div",7),o.EFF(10," Don't have an account? "),o.j41(11,"a",8),o.EFF(12,"Register"),o.k0s()()()()()()()),2&n&&(o.R7$(11),o.Y8G("routerLink",o.eq3(1,y,"/"+e.appRoutes.Registration)))},dependencies:[f.l,E,l.iI,l.Wk],styles:[".auth__content[_ngcontent-%COMP%]{margin:var(--space-20) 0}.auth__header[_ngcontent-%COMP%]{font-size:var(--title);line-height:var(--title-line-height);font-weight:var(--text-semibold)}.auth__login-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-8)}"],changeDetection:0})}return i})()}}]);