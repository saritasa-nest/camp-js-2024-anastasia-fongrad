import{r as a,j as e,B as x,T as d,e as v,s as y,f as j,a2 as b,ad as E,ae as S,af as L,aa as k,N as w}from"./index-ORWUVLLC.js";import{z as u,u as N,H as g,C as h,T as P,P as F,t as T,L as B}from"./PasswordField-A1E3Xl-z.js";import{B as C}from"./Button-B6BVcP7f.js";import"./OutlinedInput-BWIagoh6.js";import"./Select-D8UyQO31.js";const A="_form_knxh3_1",D="_form__control_knxh3_5",$="_form__error_knxh3_10",q="_form__button_knxh3_14",l={form:A,form__control:D,form__error:$,form__button:q},H=u.object({email:u.string().min(1,{message:"Email is required"}),password:u.string().min(1,{message:"Password is required"})}),f={email:"",password:""},R=({onSubmit:c,serverErrors:n})=>{var m;const{handleSubmit:i,formState:{errors:o},control:t,setError:_}=N({defaultValues:f,resolver:T(H)});return a.useEffect(()=>{g.setErrors(n,_,f)},[n]),e.jsxs(x,{component:"form",onSubmit:i(c),className:l.form,children:[e.jsx(h,{name:"email",control:t,render:({field:r})=>{var s;return e.jsx(P,{...r,label:"Email",fullWidth:!0,error:o.email!=null,helperText:(s=o==null?void 0:o.email)==null?void 0:s.message,className:l.form__control})}}),e.jsx(h,{name:"password",control:t,render:({field:r})=>{var s;return e.jsx(F,{field:r,hasError:o.password!=null,errorMessage:(s=o==null?void 0:o.password)==null?void 0:s.message,label:"Password"})}}),e.jsx(d,{component:"p",gutterBottom:!0,className:l.form__error,children:(m=o==null?void 0:o.root)==null?void 0:m.message}),e.jsx(C,{type:"submit",fullWidth:!0,variant:"contained",className:l.form__button,children:"Login"})]})},U=a.memo(R),V="_layout_covh8_1",W="_layout_open_covh8_12",z="_layout__card_covh8_17",p={layout:V,layout_open:W,layout__card:z},I=()=>{const c=v(y),[n,i]=a.useState([]),o="/registration",t=j(),_=b(),m=a.useCallback(r=>{E.login(r).then(s=>{S.saveAuthToken(s),t(L()),_("/anime")}).catch(s=>i(g.parseError(s)))},[t]);return e.jsx("main",{className:`${p.layout} ${c?p.layout_open:""}`,children:e.jsxs(k,{elevation:3,className:p.layout__card,children:[e.jsx(d,{variant:"h5",component:"h5",children:"Login"}),e.jsx(U,{onSubmit:m,serverErrors:n}),e.jsxs(d,{component:"p",children:["Don't have an account?",e.jsx(B,{component:w,to:o,children:"Register"})]})]})})},Q=a.memo(I);export{Q as LoginPage};
