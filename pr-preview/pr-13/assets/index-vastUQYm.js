import{r as m,aa as x,j as o,B as y,T as p,e as j,s as b,f as v,a2 as L,g as f,ab as E,ac as w,ad as N,N as P,a9 as S}from"./index-45c5IFrh.js";import{z as u,u as k,C as h,T as F,P as B,t as C,s as T,a as A,L as z}from"./PasswordField-CqwLP_wz.js";import{B as D}from"./Button-DKvPvy6H.js";import"./OutlinedInput-CH_Q9NZY.js";import"./Select-DM-nBow6.js";const U="_form_knxh3_1",W="_form__control_knxh3_5",$="_form__error_knxh3_10",q="_form__button_knxh3_14",i={form:U,form__control:W,form__error:$,form__button:q},R=u.object({email:u.string().min(1,{message:"Email is required"}),password:u.string().min(1,{message:"Password is required"})}),g={email:"",password:""},V=({onSubmit:c,serverErrors:r})=>{var l;const{handleSubmit:t,formState:{errors:s},control:n,setError:_}=k({defaultValues:g,resolver:C(R)});return m.useEffect(()=>{x.setErrors(r,_,g)},[r]),o.jsxs(y,{component:"form",onSubmit:t(c),className:i.form,children:[o.jsx(h,{name:"email",control:n,render:({field:a})=>{var e;return o.jsx(F,{...a,label:"Email",fullWidth:!0,error:s.email!=null,helperText:(e=s==null?void 0:s.email)==null?void 0:e.message,className:i.form__control})}}),o.jsx(h,{name:"password",control:n,render:({field:a})=>{var e;return o.jsx(B,{field:a,hasError:s.password!=null,errorMessage:(e=s==null?void 0:s.password)==null?void 0:e.message,label:"Password"})}}),o.jsx(p,{component:"p",gutterBottom:!0,className:i.form__error,children:(l=s==null?void 0:s.root)==null?void 0:l.message}),o.jsx(D,{type:"submit",fullWidth:!0,variant:"contained",className:i.form__button,children:"Login"})]})},H=m.memo(V),I="_layout_covh8_1",M="_layout_open_covh8_12",O="_layout__card_covh8_17",d={layout:I,layout_open:M,layout__card:O},G=()=>{const c=j(b),r="/registration",t=v(),s=L(),n=f(T),_=f(A),l=m.useCallback(a=>{t(E(a)).then(e=>{e.type.endsWith("fulfilled")&&(t(w()),s("/anime"))})},[t]);return o.jsxs("main",{className:`${d.layout} ${c?d.layout_open:""}`,children:[o.jsxs(N,{elevation:3,className:d.layout__card,children:[o.jsx(p,{variant:"h5",component:"h5",children:"Login"}),o.jsx(H,{onSubmit:l,serverErrors:_??[]}),o.jsxs(p,{component:"p",children:["Don't have an account?",o.jsx(z,{component:P,to:r,children:"Register"})]})]}),n&&o.jsx(S,{})]})},Z=m.memo(G);export{Z as LoginPage};
