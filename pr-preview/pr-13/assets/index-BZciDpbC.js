import{r as m,aa as y,j as o,B as j,T as h,e as v,s as b,f as L,a2 as E,g as f,ab as N,ac as P,ad as k,N as w,a9 as F}from"./index-Cghiw7Cd.js";import{z as d,u as S,C as g,T as B,P as C,t as T,s as A,a as z,L as D}from"./PasswordField-DNI_8FxD.js";import{B as U}from"./Button-gqR1RRue.js";import"./OutlinedInput-DSXKm_CF.js";import"./Select-C_u-8G9U.js";const W="_form_knxh3_1",$="_form__control_knxh3_5",q="_form__error_knxh3_10",R="_form__button_knxh3_14",c={form:W,form__control:$,form__error:q,form__button:R},V=d.object({email:d.string().min(1,{message:"Email is required"}),password:d.string().min(1,{message:"Password is required"})}),x={email:"",password:""},H=({onSubmit:_,serverErrors:n})=>{var l;const{handleSubmit:s,formState:{errors:e},control:i,setError:u}=S({defaultValues:x,resolver:T(V)});return m.useEffect(()=>{y.setErrors(n,u,x)},[n]),o.jsxs(j,{component:"form",onSubmit:s(_),className:c.form,children:[o.jsx(g,{name:"email",control:i,render:({field:t,fieldState:r})=>{var a;return o.jsx(B,{...t,label:"Email",fullWidth:!0,error:r.invalid,helperText:(a=r.error)==null?void 0:a.message,className:c.form__control})}}),o.jsx(g,{name:"password",control:i,render:({field:t,fieldState:r})=>{var a;return o.jsx(C,{field:t,hasError:r.invalid,errorMessage:(a=r.error)==null?void 0:a.message,label:"Password"})}}),o.jsx(h,{component:"p",gutterBottom:!0,className:c.form__error,children:(l=e==null?void 0:e.root)==null?void 0:l.message}),o.jsx(U,{type:"submit",fullWidth:!0,variant:"contained",className:c.form__button,children:"Login"})]})},I=m.memo(H),M="_layout_covh8_1",O="_layout_open_covh8_12",G="_layout__card_covh8_17",p={layout:M,layout_open:O,layout__card:G},J=()=>{const _=v(b),n="/registration",s=L(),e=E(),i=f(A),u=f(z),l=m.useCallback(t=>{s(N(t)).then(r=>{r.type.endsWith("fulfilled")&&(s(P()),e("/anime"))})},[s]);return o.jsxs("main",{className:`${p.layout} ${_?p.layout_open:""}`,children:[o.jsxs(k,{elevation:3,className:p.layout__card,children:[o.jsx(h,{variant:"h5",component:"h5",children:"Login"}),o.jsx(I,{onSubmit:l,serverErrors:u??[]}),o.jsxs(h,{component:"p",children:["Don't have an account?",o.jsx(D,{component:w,to:n,children:"Register"})]})]}),i&&o.jsx(F,{})]})},oo=m.memo(J);export{oo as LoginPage};
