import{r as a,j as e,B as x,T as d,e as v,s as y,f as j,a2 as b,aa as E,ab as S,ac as L,ad as k,N as w}from"./index-Ct1Xj9Ik.js";import{z as u,u as N,E as g,C as h,T as P,P as F,t as T,L as B}from"./PasswordField-0CIUBoyX.js";import{B as C}from"./Button-BecChUm7.js";import"./OutlinedInput-CgIjpSJ1.js";import"./Select-DF_bdo0F.js";const A="_form_knxh3_1",D="_form__control_knxh3_5",$="_form__error_knxh3_10",q="_form__button_knxh3_14",c={form:A,form__control:D,form__error:$,form__button:q},R=u.object({email:u.string().min(1,{message:"Email is required"}),password:u.string().min(1,{message:"Password is required"})}),f={email:"",password:""},U=({onSubmit:l,serverErrors:n})=>{var m;const{handleSubmit:i,formState:{errors:o},control:t,setError:_}=N({defaultValues:f,resolver:T(R)});return a.useEffect(()=>{g.setErrors(n,_,f)},[n]),e.jsxs(x,{component:"form",onSubmit:i(l),className:c.form,children:[e.jsx(h,{name:"email",control:t,render:({field:r})=>{var s;return e.jsx(P,{...r,label:"Email",fullWidth:!0,error:o.email!=null,helperText:(s=o==null?void 0:o.email)==null?void 0:s.message,className:c.form__control})}}),e.jsx(h,{name:"password",control:t,render:({field:r})=>{var s;return e.jsx(F,{field:r,hasError:o.password!=null,errorMessage:(s=o==null?void 0:o.password)==null?void 0:s.message,label:"Password"})}}),e.jsx(d,{component:"p",gutterBottom:!0,className:c.form__error,children:(m=o==null?void 0:o.root)==null?void 0:m.message}),e.jsx(C,{type:"submit",fullWidth:!0,variant:"contained",className:c.form__button,children:"Login"})]})},V=a.memo(U),W="_layout_covh8_1",z="_layout_open_covh8_12",I="_layout__card_covh8_17",p={layout:W,layout_open:z,layout__card:I},M=()=>{const l=v(y),[n,i]=a.useState([]),o="/registration",t=j(),_=b(),m=a.useCallback(r=>{E.login(r).then(s=>{S.saveAuthToken(s),t(L()),_("/anime")}).catch(s=>i(g.parseError(s)))},[t]);return e.jsx("main",{className:`${p.layout} ${l?p.layout_open:""}`,children:e.jsxs(k,{elevation:3,className:p.layout__card,children:[e.jsx(d,{variant:"h5",component:"h5",children:"Login"}),e.jsx(V,{onSubmit:m,serverErrors:n}),e.jsxs(d,{component:"p",children:["Don't have an account?",e.jsx(B,{component:w,to:o,children:"Register"})]})]})})},Q=a.memo(M);export{Q as LoginPage};
