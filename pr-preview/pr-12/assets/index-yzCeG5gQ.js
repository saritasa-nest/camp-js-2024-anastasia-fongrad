import{s as Ge,a as Te,r as c,u as Ae,e as De,_ as z,j as n,b as y,c as N,f as ae,d as Oe,g as E,h as ze,T as Ee,C as Le,i as W,k as L,B as Me,l as fe,m as Qe,n as R,o as X,p as J,q as Ue,t as ge,v as ye,w as re,L as M,x as Q,y as Ve,z as be,A,D as xe,E as U,F as _e,P as qe,I as Y,G as B,H as Ce,J as Ke,K,M as Ze,N as He,O as We,Q as Xe,R as Je}from"./index-CC2gzBeJ.js";import{u as Ye,F as ve,I as je,S as ke,M as D,a as et,d as tt,b as Se}from"./Search-DNaEhmJC.js";import{B as Ie}from"./Button--jbqgAog.js";const st=["className","component"];function nt(e={}){const{themeId:t,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:r}=e,i=Ge("div",{shouldForwardProp:m=>m!=="theme"&&m!=="sx"&&m!=="as"})(Te);return c.forwardRef(function(o,l){const h=Ae(a),d=De(o),{className:p,component:b="div"}=d,g=z(d,st);return n.jsx(i,y({as:b,ref:l,className:N(p,r?r(s):s),theme:t&&h[t]||h},g))})}function at(e,t=0,a=1){return Oe(e,t,a)}function rt(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function Be(e){if(e.type)return e;if(e.charAt(0)==="#")return Be(rt(e));const t=e.indexOf("("),a=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(a)===-1)throw new Error(ae(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r)===-1)throw new Error(ae(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}function ot(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.indexOf("rgb")!==-1?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.indexOf("hsl")!==-1&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.indexOf("color")!==-1?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function it(e,t){return e=Be(e),t=at(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,ot(e)}function ct(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function lt(e){return parseFloat(e)}const dt=E("MuiBox",["root"]),ut=ze(),P=nt({themeId:Ee,defaultTheme:ut,defaultClassName:dt.root,generateClassName:Le.generate});function ht(e){return W("PrivateSwitchBase",e)}E("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const mt=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],pt=e=>{const{classes:t,checked:a,disabled:s,edge:r}=e,i={root:["root",a&&"checked",s&&"disabled",r&&`edge${R(r)}`],input:["input"]};return X(i,ht,t)},ft=L(Me)(({ownerState:e})=>y({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),gt=L("input",{shouldForwardProp:fe})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),yt=c.forwardRef(function(t,a){const{autoFocus:s,checked:r,checkedIcon:i,className:u,defaultChecked:m,disabled:o,disableFocusRipple:l=!1,edge:h=!1,icon:d,id:p,inputProps:b,inputRef:g,name:x,onBlur:_,onChange:j,onFocus:S,readOnly:f,required:C=!1,tabIndex:F,type:v,value:ee}=t,Pe=z(t,mt),[te,Fe]=Qe({controlled:r,default:!!m,name:"SwitchBase",state:"checked"}),I=Ye(),$e=k=>{S&&S(k),I&&I.onFocus&&I.onFocus(k)},we=k=>{_&&_(k),I&&I.onBlur&&I.onBlur(k)},Re=k=>{if(k.nativeEvent.defaultPrevented)return;const ne=k.target.checked;Fe(ne),j&&j(k,ne)};let $=o;I&&typeof $>"u"&&($=I.disabled);const Ne=v==="checkbox"||v==="radio",q=y({},t,{checked:te,disabled:$,disableFocusRipple:l,edge:h}),se=pt(q);return n.jsxs(ft,y({component:"span",className:N(se.root,u),centerRipple:!0,focusRipple:!l,disabled:$,tabIndex:null,role:void 0,onFocus:$e,onBlur:we,ownerState:q,ref:a},Pe,{children:[n.jsx(gt,y({autoFocus:s,checked:r,defaultChecked:m,className:se.input,disabled:$,id:Ne?p:void 0,name:x,onChange:Re,readOnly:f,ref:g,required:C,ownerState:q,tabIndex:F,type:v},v==="checkbox"&&ee===void 0?{}:{value:ee},b)),te?i:d]}))}),bt=J(n.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),xt=J(n.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),_t=J(n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Ct(e){return W("MuiCheckbox",e)}const Z=E("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),vt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],jt=e=>{const{classes:t,indeterminate:a,color:s,size:r}=e,i={root:["root",a&&"indeterminate",`color${R(s)}`,`size${R(r)}`]},u=X(i,Ct,t);return y({},t,u)},kt=L(yt,{shouldForwardProp:e=>fe(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t[`size${R(a.size)}`],a.color!=="default"&&t[`color${R(a.color)}`]]}})(({theme:e,ownerState:t})=>y({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ue(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${Z.checked}, &.${Z.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Z.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),St=n.jsx(xt,{}),It=n.jsx(bt,{}),Bt=n.jsx(_t,{}),Pt=c.forwardRef(function(t,a){var s,r;const i=ge({props:t,name:"MuiCheckbox"}),{checkedIcon:u=St,color:m="primary",icon:o=It,indeterminate:l=!1,indeterminateIcon:h=Bt,inputProps:d,size:p="medium",className:b}=i,g=z(i,vt),x=l?h:o,_=l?h:u,j=y({},i,{color:m,indeterminate:l,size:p}),S=jt(j);return n.jsx(kt,y({type:"checkbox",inputProps:y({"data-indeterminate":l},d),icon:c.cloneElement(x,{fontSize:(s=x.props.fontSize)!=null?s:p}),checkedIcon:c.cloneElement(_,{fontSize:(r=_.props.fontSize)!=null?r:p}),ownerState:j,ref:a,className:N(S.root,b)},g,{classes:S}))});function Ft(e){return W("MuiSkeleton",e)}E("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const $t=["animation","className","component","height","style","variant","width"];let O=e=>e,oe,ie,ce,le;const wt=e=>{const{classes:t,variant:a,animation:s,hasChildren:r,width:i,height:u}=e;return X({root:["root",a,s,r&&"withChildren",r&&!i&&"fitContent",r&&!u&&"heightAuto"]},Ft,t)},Rt=ye(oe||(oe=O`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),Nt=ye(ie||(ie=O`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Gt=L("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],a.animation!==!1&&t[a.animation],a.hasChildren&&t.withChildren,a.hasChildren&&!a.width&&t.fitContent,a.hasChildren&&!a.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const a=ct(e.shape.borderRadius)||"px",s=lt(e.shape.borderRadius);return y({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:it(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${s}${a}/${Math.round(s/.6*10)/10}${a}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&re(ce||(ce=O`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),Rt),({ownerState:e,theme:t})=>e.animation==="wave"&&re(le||(le=O`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),Nt,(t.vars||t).palette.action.hover)),de=c.forwardRef(function(t,a){const s=ge({props:t,name:"MuiSkeleton"}),{animation:r="pulse",className:i,component:u="span",height:m,style:o,variant:l="text",width:h}=s,d=z(s,$t),p=y({},s,{animation:r,component:u,variant:l,hasChildren:!!d.children}),b=wt(p);return n.jsx(Gt,y({as:u,ref:a,className:N(b.root,i),ownerState:p},d,{style:y({width:h,height:m},o)}))}),Tt="/camp-js-2024-anastasia-fongrad/pr-preview/pr-12/assets/loading-Crz_qi3L.webp",At="_loading__image_3ghzo_1",Dt={loading__image:At},Ot=()=>n.jsx(M,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:n.jsx("img",{src:Tt,className:Dt.loading__image})}),zt=c.memo(Ot),Et=Q(e=>e.genres.genres,e=>e),Lt=Q(e=>e.genres.isLoading,e=>e),Mt=Q(e=>e.genres.hasNext,e=>e);Q(e=>e.genres.error,e=>e);const Qt=()=>n.jsx(M,{alignItems:"center",sx:{borderBottom:1,borderColor:"rgba(0 0 0 / 5%)"},children:n.jsxs(P,{display:"flex",flex:"1 1 0",flexDirection:"column",gap:1,children:[n.jsx(de,{width:"40%"}),n.jsx(de,{width:"60%"})]})}),Ut=c.memo(Qt);function V(){const{pathname:e,search:t}=Ve(),a=be(),s=new URLSearchParams(t),r=Object.fromEntries(s.entries()),i=o=>new URLSearchParams(t).get(o)??null,u=o=>{const l={};return o.map(h=>{const d=i(h);l[h]=d}),l};function m(o,l=e,h){const d=new URLSearchParams(t);Object.entries(o).forEach(([g,x])=>{x==null?d.delete(g):d.set(g,String(x))});const p=d.toString(),b=`${l}${p?`?${p}`:""}`;a(b,{replace:h})}return{queryParams:r,getQueryParamByKey:i,getQueryParamsByKeys:u,setQueryParams:o=>m(o),directToPathWithQueryParams:(o,l)=>m(o,l,!1)}}const Vt="_sort_1capx_1",qt={sort:Vt};var H=(e=>(e.SortByNameAsc="Sort by name (A - Z)",e.SortByNameDesc="Sort by name (Z - A)",e.SortByTypeAsc="Sort by type (A - Z)",e.SortByTypeDesc="Sort by type (Z - A)",e))(H||{});const G={"Sort by name (A - Z)":{sortField:"name",sortDirection:"asc"},"Sort by name (Z - A)":{sortField:"name",sortDirection:"desc"},"Sort by type (A - Z)":{sortField:"type",sortDirection:"asc"},"Sort by type (Z - A)":{sortField:"type",sortDirection:"desc"}},Kt=()=>{const{getQueryParamsByKeys:e,setQueryParams:t}=V(),{sortField:a,sortDirection:s}=e(["sortField","sortDirection"]),r={sortField:a,sortDirection:s},[i,u]=c.useState(r),m=Object.values(H),o=c.useCallback(d=>{const p=d.target.value;A(p,H);const b=G[p];u(b)},[u]);function l(d){return Object.keys(G).find(p=>G[p].sortField===d.sortField&&G[p].sortDirection===d.sortDirection)??"Sort by name (A - Z)"}const h=d=>{d.stopPropagation(),u({sortDirection:null,sortField:null})};return c.useEffect(()=>{t(i)},[i]),n.jsx(P,{className:qt.sort,children:n.jsxs(ve,{children:[n.jsx(je,{id:"single-select-label",children:"Sort By"}),n.jsxs(ke,{labelId:"single-select-label",value:l(i),onChange:o,label:"Sort By",children:[m.map(d=>n.jsx(D,{value:d,children:d},d)),n.jsx(D,{children:n.jsx(Ie,{onClick:h,variant:"outlined",color:"secondary",children:"Reset"})})]})]})})},Zt=c.memo(Kt),Ht=c.forwardRef(({selected:e,genre:t,onClick:a},s)=>n.jsx(M,{disablePadding:!0,ref:s,children:n.jsx(xe,{onClick:a,selected:e,children:n.jsx(U,{primary:t.name,secondary:`Type - ${t.type}`})})})),ue=c.memo(Ht),Wt="_search_6oqtb_1",Xt="_search__form_6oqtb_7",T={search:Wt,search__form:Xt,"search__input-base":"_search__input-base_6oqtb_14","search__icon-button":"_search__icon-button_6oqtb_19"},Jt=()=>{const{getQueryParamByKey:e,setQueryParams:t}=V(),a=e("search")??"",[s,r]=c.useState(a),i=c.useCallback(u=>{u.preventDefault(),r(u.target.value)},[r]);return c.useEffect(()=>{const u=(s==null?void 0:s.length)!==0?s:null;t({search:u})},[s]),n.jsxs(P,{className:T.search,children:[n.jsx(_e,{variant:"h5",component:"h5",gutterBottom:!0,children:"search"}),n.jsxs(qe,{component:"form",className:T.search__form,children:[n.jsx(et,{className:T["search__input-base"],placeholder:"Search Genres ...","aria-label":"search genres",value:s,onChange:i}),n.jsx(Y,{type:"button",className:T["search__icon-button"],"aria-label":"search",color:"primary",children:n.jsx(tt,{})})]})]})},Yt=c.memo(Jt),es="_filters_1028r_1",he={filters:es},me=[{value:B.FilterType.Genres,label:"Genres"},{value:B.FilterType.ExplicitGenres,label:"Explicit genres"},{value:B.FilterType.Themes,label:"Themes"},{value:B.FilterType.Demographics,label:"Demographics"}],ts=()=>{var m;const{getQueryParamByKey:e,setQueryParams:t}=V(),a=e("filter")==null?[]:((m=e("filter"))==null?void 0:m.split(","))??[],[s,r]=c.useState(a),i=c.useCallback(o=>{const{value:l}=o.target,h=typeof l=="string"?l.split(","):l;r(h)},[r]),u=c.useCallback(o=>{o.stopPropagation(),r([])},[r]);return c.useEffect(()=>{const o=s.length===0?null:s;t({filter:o})},[s]),n.jsx(P,{className:he.filters,children:n.jsxs(ve,{children:[n.jsx(je,{id:"multiple-filters-select-label",children:"Select Filters"}),n.jsxs(ke,{className:he.filters__select,labelId:"multiple-filters-select-label",label:"Select Filters",multiple:!0,value:s,onChange:i,renderValue:o=>n.jsx(_e,{noWrap:!0,children:o.map(l=>{var h;return(h=me.find(d=>d.value===l))==null?void 0:h.label}).join(", ")}),children:[me.map(o=>n.jsxs(D,{value:o.value,children:[n.jsx(Pt,{checked:s.includes(o.value)}),n.jsx(U,{primary:o.label})]},o.value)),n.jsx(D,{children:n.jsx(Ie,{onClick:u,variant:"outlined",color:"secondary",children:"Reset"})})]})]})})},ss=c.memo(ts);function ns(e,t){const[a,s]=c.useState(e),r=t*1e3;return c.useEffect(()=>{const i=setTimeout(()=>{s(e)},r);return()=>{clearTimeout(i)}},[e,t]),a}const pe={"genre-list":"_genre-list_19jpa_1","genre-list__items":"_genre-list__items_19jpa_10"},as=({onGenreClick:e})=>{const{genreId:t}=Ce(),[a,s]=c.useState(t?Number(t):void 0),r=Ke(),{getQueryParamsByKeys:i}=V(),u=K(Et),m=K(Lt),o=K(Mt),l=c.useRef(null),h=c.useRef(),d=c.useCallback(f=>{var C;(C=h.current)==null||C.disconnect(),f&&(h.current=new IntersectionObserver(F=>{var v;F[0].isIntersecting&&o&&(S(o),(v=h.current)==null||v.disconnect())}),h.current.observe(f))},[o]),p=c.useCallback(f=>{s(f),e(f)},[e]),{search:b,filter:g,sortField:x,sortDirection:_}=i(["search","filter","sortField","sortDirection"]),j=ns(b,1),S=c.useCallback(f=>{x!=null&&A(x,B.SortField),_!=null&&A(_,B.SortDirection);const F=(g==null?void 0:g.split(",").map(v=>(A(v,B.FilterType),v)))??null;r(Ze({search:j,filter:F,sort:x,direction:_,nextCursor:f}))},[j,g,x,_]);return c.useEffect(()=>{var f;(f=l.current)==null||f.scrollTo({top:0,behavior:"instant"}),S(null)},[j,g,x,_]),n.jsxs(P,{className:pe["genre-list"],children:[n.jsx(Yt,{}),n.jsx(ss,{}),n.jsx(Zt,{}),n.jsxs(He,{className:pe["genre-list__items"],ref:l,children:[n.jsx(M,{disablePadding:!0,children:n.jsxs(xe,{children:[n.jsx(Y,{edge:"start",color:"inherit","aria-label":"add",children:n.jsx(Se,{})}),n.jsx(U,{primary:"Add Genre"})]})}),m&&u.length===0&&Array.from(new Array(10)).map((f,C)=>n.jsx(Ut,{},C)),u.map((f,C)=>u.length===C+1?n.jsx(ue,{genre:f,ref:d,onClick:()=>p(f.id),selected:f.id===a},C):n.jsx(ue,{genre:f,onClick:()=>p(f.id),selected:f.id===a},C)),m&&n.jsx(zt,{})]})]})},rs=c.memo(as),os="_layout_54mps_1",is="_layout_open_54mps_13",cs="_layout__sidebar_54mps_18",ls="_layout__empty_54mps_23",ds="_layout__button_54mps_31",w={layout:os,layout_open:is,layout__sidebar:cs,layout__empty:ls,layout__button:ds},us=()=>{const e=We(Xe),t=be(),{genreId:a}=Ce(),s=r=>{t(`/genre/${r}`)};return n.jsxs("main",{className:N(w.layout,e&&w.layout_open),children:[n.jsx(P,{className:w.layout__sidebar,children:n.jsx(rs,{onGenreClick:s})}),a?n.jsx(Je,{}):n.jsx("div",{className:w.layout__empty,children:n.jsxs("div",{className:w.layout__button,children:[n.jsx(Y,{edge:"start",color:"inherit","aria-label":"add",children:n.jsx(Se,{})}),n.jsx(U,{primary:"Add Genre"})]})})]})},fs=c.memo(us);export{fs as GenrePage};
